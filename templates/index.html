<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Health Monitoring Dashboard</title>
		<!-- Tailwind CSS for styling -->
		<script src="https://cdn.tailwindcss.com"></script>
		<!-- Google Fonts: Inter -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
			rel="stylesheet"
		/>
		<!-- Font Awesome for icons -->
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
		/>
		<!-- Custom CSS -->
		<link
			rel="stylesheet"
			href="{{ url_for('static', filename='css/style.css') }}"
		/>
	</head>
	<body class="bg-slate-100 font-sans text-slate-800">
		<div class="flex min-h-screen">
			<!-- Sidebar Navigation -->
			<aside
				class="w-20 bg-[#18181B] text-white flex flex-col items-center py-6 space-y-8"
			>
				<div class="text-2xl font-bold">M</div>
				<a href="#" class="p-3 bg-gray-700/50 rounded-lg"
					><i class="fas fa-home"></i
				></a>
				<a href="#" class="p-3 hover:bg-gray-700/50 rounded-lg"
					><i class="fas fa-chart-bar"></i
				></a>
				<a href="#" class="p-3 hover:bg-gray-700/50 rounded-lg"
					><i class="fas fa-cogs"></i
				></a>
				<a href="#" class="p-3 hover:bg-gray-700/50 rounded-lg"
					><i class="fas fa-user-friends"></i
				></a>
				<a href="#" class="p-3 hover:bg-gray-700/50 rounded-lg"
					><i class="fas fa-life-ring"></i
				></a>
				<div class="flex-grow"></div>
				<a href="#" class="p-3 hover:bg-gray-700/50 rounded-lg"
					><i class="fas fa-user-circle"></i
				></a>
			</aside>

			<!-- Main Content -->
			<main class="flex-1 p-6 lg:p-10">
				<!-- Header -->
				<header
					class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8"
				>
					<h1 class="text-4xl font-bold text-slate-900">
						Health Dashboard
					</h1>
					<button
						id="connect-btn"
						class="mt-4 md:mt-0 w-full md:w-auto flex items-center justify-center gap-2 bg-white text-slate-800 font-semibold py-2 px-5 rounded-lg shadow-md hover:bg-slate-200 transition-all duration-300 ease-in-out"
					>
						<i class="fas fa-satellite-dish text-blue-500"></i>
						<span>Connect to Empatica E4</span>
					</button>
				</header>

				<!-- Data Display Area -->
				<div id="data-display-area" class="hidden space-y-8">
					<!-- Raw Data Section -->
					<section class="bg-white p-6 rounded-xl shadow-lg">
						<div
							id="raw-data-header"
							class="flex justify-between items-center cursor-pointer"
						>
							<h2 class="text-xl font-semibold">
								Live Data Point
							</h2>
							<i
								id="toggle-icon"
								class="fas fa-chevron-down transition-transform"
							></i>
						</div>
						<div
							id="raw-data-content"
							class="mt-4 transition-all duration-500 ease-in-out overflow-hidden max-h-[500px]"
						>
							<p class="text-sm text-slate-500 mb-2">
								The latest complete data record generated by the
								model.
							</p>
							<div
								class="bg-slate-900 text-white font-mono text-xs p-4 rounded-lg h-64 overflow-y-auto custom-scrollbar"
							>
								<pre
									id="raw-data-log"
									class="whitespace-pre-wrap"
								></pre>
							</div>
						</div>
					</section>

					<!-- Transformed Data Table -->
					<section class="bg-white p-6 rounded-xl shadow-lg">
						<h2 class="text-xl font-semibold mb-3">
							Generated Data Stream (Last 10 samples)
						</h2>
						<div class="overflow-x-auto custom-scrollbar">
							<table class="w-full text-left">
								<thead>
									<tr class="border-b bg-slate-50 text-xs">
										<th
											class="p-2 whitespace-nowrap sticky left-0 bg-slate-50"
										>
											Timestamp
										</th>
										<th class="p-2 whitespace-nowrap">
											ECG
										</th>
										<th class="p-2 whitespace-nowrap">
											EDA
										</th>
										<th class="p-2 whitespace-nowrap">
											Temp
										</th>
										<th class="p-2 whitespace-nowrap">
											Resp
										</th>
										<th class="p-2 whitespace-nowrap">
											EMG
										</th>
										<th class="p-2 whitespace-nowrap">
											ACC_x
										</th>
										<th class="p-2 whitespace-nowrap">
											ACC_y
										</th>
										<th class="p-2 whitespace-nowrap">
											ACC_z
										</th>
										<th class="p-2 whitespace-nowrap">
											ACC_mag
										</th>
										<th class="p-2 whitespace-nowrap">
											BVP
										</th>
										<th class="p-2 whitespace-nowrap">
											HR
										</th>
										<th class="p-2 whitespace-nowrap">
											IBI
										</th>
										<th class="p-2 whitespace-nowrap">
											Resp_rate
										</th>
									</tr>
								</thead>
								<tbody id="transformed-data-body">
									<!-- JS will populate this -->
								</tbody>
							</table>
						</div>
					</section>

					<!-- Models Section -->
					<section>
						<h2 class="text-xl font-semibold mb-4">
							Model Health Scores
						</h2>
						<div
							class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6"
							id="models-grid"
						>
							<!-- JS will populate this -->
						</div>
					</section>

					<!-- Health Score Log -->
					<section class="bg-white p-6 rounded-xl shadow-lg">
						<h2 class="text-xl font-semibold mb-3">
							Health Score Log
						</h2>
						<div class="overflow-x-auto h-72 custom-scrollbar">
							<table class="w-full text-left">
								<thead>
									<tr
										class="border-b bg-slate-50 sticky top-0"
									>
										<th class="p-3">Timestamp</th>
										<th class="p-3">Sleep Quality</th>
										<th class="p-3">
											Psychosomatic Stress
										</th>
										<th class="p-3">Cognitive Load</th>
										<th class="p-3">
											Cardiovascular Health
										</th>
										<th class="p-3">Emotional Vitality</th>
									</tr>
								</thead>
								<tbody id="score-log-body">
									<!-- JS will populate this -->
								</tbody>
							</table>
						</div>
					</section>
				</div>
				<!-- Initial Message -->
				<div id="initial-message" class="text-center py-20">
					<i
						class="fas fa-power-off text-6xl text-slate-300 mb-4"
					></i>
					<h2 class="text-2xl font-semibold text-slate-600">
						Device Disconnected
					</h2>
					<p class="text-slate-500">
						Please connect to a Fitbit device to start monitoring
						and logging data.
					</p>
				</div>
			</main>
		</div>

		<!-- Custom JavaScript -->
		<script src="{{ url_for('static', filename='js/main.js') }}"></script>
	</body>
</html>
